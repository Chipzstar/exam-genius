// -------------------------------------
// WARNING
// THIS FILE IS AUTOGENERATED BY PRISMERGE
// DO NOT MANUALLY EDIT THIS FILE!
// -------------------------------------

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model Course {
  id        Int     @id @unique @default(autoincrement())
  course_id String  @unique
  name      String
  user_id   Int
  user      User    @relation(fields: [user_id], references: [id], onDelete: Cascade)
  Paper     Paper[]

  @@index([user_id])
}

model Paper {
  id        Int    @id @unique @default(autoincrement())
  paper_id  String @unique
  user_id   Int
  user      User   @relation(fields: [user_id], references: [id], onDelete: Cascade)
  course_id Int
  course    Course @relation(fields: [course_id], references: [id], onDelete: Cascade)

  @@index([user_id, course_id])
}

model StripeEvent {
  id               String   @id @unique
  api_version      String?
  data             Json
  request          Json?
  type             String
  object           String
  account          String?
  created          DateTime
  livemode         Boolean
  pending_webhooks Int
}

model User {
  id                         Int                       @id @default(autoincrement())
  email                      String                    @unique
  full_name                  String
  firstname                  String
  lastname                   String
  year                       String?
  role                       String?
  stripe_customer_id         String?
  stripe_subscription_id     String?
  stripe_subscription_status StripeSubscriptionStatus?
  Course                     Course[]
  Paper                      Paper[]
}

enum StripeSubscriptionStatus {
  incomplete
  incomplete_expired
  trialing
  active
  past_due
  canceled
  unpaid
  paused
}
